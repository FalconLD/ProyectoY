{% extends 'DriveX/base.html' %}
{% load static %}

{% block title %}Registro de Usuario - Rental Car DriveX{% endblock %}

{% block content %}
<main>
    <section class="form-section">
        <div class="container">
            <h2 class="section-title">Registro de Usuario</h2>
            
            <!-- El 'action' no es necesario si la misma vista procesa el GET y el POST -->
            <form method="post" class="form-container">
                {% csrf_token %}

                <!-- 
                    Mostramos errores generales del formulario (si los hay), 
                    que no están asociados a un campo específico.
                -->
                {% if form.non_field_errors %}
                    <div class="alert alert-danger">
                        {% for error in form.non_field_errors %}
                            <p>{{ error }}</p>
                        {% endfor %}
                    </div>
                {% endif %}

                <!-- 
                    Iteramos sobre cada campo del formulario ('username', 'password', etc.)
                    y lo envolvemos en nuestra estructura HTML con la clase .form-group.
                -->
                {% for field in form %}
                    <div class="form-group">
                        {{ field.label_tag }} <!-- Renderiza la etiqueta <label> del campo -->
                        {{ field }}         <!-- Renderiza el widget del campo (<input>, <select>, etc.) -->
                        
                        <!-- Mostramos los errores de validación para este campo específico -->
                        {% if field.errors %}
                            <div class="error-message" style="display: block; color: #ff6b6b; font-size: 0.9em; margin-top: 5px;">
                                {% for error in field.errors %}
                                    {{ error }}
                                {% endfor %}
                            </div>
                        {% endif %}
                        
                        <!-- 
                            Django incluye textos de ayuda para los campos de contraseña.
                            Los mostramos para guiar al usuario.
                        -->
                        {% if field.help_text %}
                            <div class="help-text" style="font-size: 0.8em; color: #ccc; margin-top: 5px;">
                                {{ field.help_text|safe }}
                            </div>
                        {% endif %}
                    </div>
                {% endfor %}
                
                <button type="submit" class="cta-button">Registrarse</button>
                <br><br>
                <p>¿Ya tienes una cuenta? <a href="{% url 'login' %}">Inicia sesión aquí</a></p>
            </form>
        </div>
    </section>
</main>
{% endblock %}